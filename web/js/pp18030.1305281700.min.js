var hexcase=0;var chrsz=8;var MIN_HTTS_TIMESTAMP=1293156753137;function hex_md5(b){return binl2hex(core_md5(str2binl(b),b.length*chrsz))}function core_md5(a,q){a[q>>5]|=128<<((q)%32);a[(((q+64)>>>9)<<4)+14]=q;var b=1732584193;var c=-271733879;var d=-1732584194;var i=271733878;for(var t=0;t<a.length;t+=16){var r=b;var s=c;var u=d;var v=i;b=md5_ff(b,c,d,i,a[t+0],7,-680876936);i=md5_ff(i,b,c,d,a[t+1],12,-389564586);d=md5_ff(d,i,b,c,a[t+2],17,606105819);c=md5_ff(c,d,i,b,a[t+3],22,-1044525330);b=md5_ff(b,c,d,i,a[t+4],7,-176418897);i=md5_ff(i,b,c,d,a[t+5],12,1200080426);d=md5_ff(d,i,b,c,a[t+6],17,-1473231341);c=md5_ff(c,d,i,b,a[t+7],22,-45705983);b=md5_ff(b,c,d,i,a[t+8],7,1770035416);i=md5_ff(i,b,c,d,a[t+9],12,-1958414417);d=md5_ff(d,i,b,c,a[t+10],17,-42063);c=md5_ff(c,d,i,b,a[t+11],22,-1990404162);b=md5_ff(b,c,d,i,a[t+12],7,1804603682);i=md5_ff(i,b,c,d,a[t+13],12,-40341101);d=md5_ff(d,i,b,c,a[t+14],17,-1502002290);c=md5_ff(c,d,i,b,a[t+15],22,1236535329);b=md5_gg(b,c,d,i,a[t+1],5,-165796510);i=md5_gg(i,b,c,d,a[t+6],9,-1069501632);d=md5_gg(d,i,b,c,a[t+11],14,643717713);c=md5_gg(c,d,i,b,a[t+0],20,-373897302);b=md5_gg(b,c,d,i,a[t+5],5,-701558691);i=md5_gg(i,b,c,d,a[t+10],9,38016083);d=md5_gg(d,i,b,c,a[t+15],14,-660478335);c=md5_gg(c,d,i,b,a[t+4],20,-405537848);b=md5_gg(b,c,d,i,a[t+9],5,568446438);i=md5_gg(i,b,c,d,a[t+14],9,-1019803690);d=md5_gg(d,i,b,c,a[t+3],14,-187363961);c=md5_gg(c,d,i,b,a[t+8],20,1163531501);b=md5_gg(b,c,d,i,a[t+13],5,-1444681467);i=md5_gg(i,b,c,d,a[t+2],9,-51403784);d=md5_gg(d,i,b,c,a[t+7],14,1735328473);c=md5_gg(c,d,i,b,a[t+12],20,-1926607734);b=md5_hh(b,c,d,i,a[t+5],4,-378558);i=md5_hh(i,b,c,d,a[t+8],11,-2022574463);d=md5_hh(d,i,b,c,a[t+11],16,1839030562);c=md5_hh(c,d,i,b,a[t+14],23,-35309556);b=md5_hh(b,c,d,i,a[t+1],4,-1530992060);i=md5_hh(i,b,c,d,a[t+4],11,1272893353);d=md5_hh(d,i,b,c,a[t+7],16,-155497632);c=md5_hh(c,d,i,b,a[t+10],23,-1094730640);b=md5_hh(b,c,d,i,a[t+13],4,681279174);i=md5_hh(i,b,c,d,a[t+0],11,-358537222);d=md5_hh(d,i,b,c,a[t+3],16,-722521979);c=md5_hh(c,d,i,b,a[t+6],23,76029189);b=md5_hh(b,c,d,i,a[t+9],4,-640364487);i=md5_hh(i,b,c,d,a[t+12],11,-421815835);d=md5_hh(d,i,b,c,a[t+15],16,530742520);c=md5_hh(c,d,i,b,a[t+2],23,-995338651);b=md5_ii(b,c,d,i,a[t+0],6,-198630844);i=md5_ii(i,b,c,d,a[t+7],10,1126891415);d=md5_ii(d,i,b,c,a[t+14],15,-1416354905);c=md5_ii(c,d,i,b,a[t+5],21,-57434055);b=md5_ii(b,c,d,i,a[t+12],6,1700485571);i=md5_ii(i,b,c,d,a[t+3],10,-1894986606);d=md5_ii(d,i,b,c,a[t+10],15,-1051523);c=md5_ii(c,d,i,b,a[t+1],21,-2054922799);b=md5_ii(b,c,d,i,a[t+8],6,1873313359);i=md5_ii(i,b,c,d,a[t+15],10,-30611744);d=md5_ii(d,i,b,c,a[t+6],15,-1560198380);c=md5_ii(c,d,i,b,a[t+13],21,1309151649);b=md5_ii(b,c,d,i,a[t+4],6,-145523070);i=md5_ii(i,b,c,d,a[t+11],10,-1120210379);d=md5_ii(d,i,b,c,a[t+2],15,718787259);c=md5_ii(c,d,i,b,a[t+9],21,-343485551);b=safe_add(b,r);c=safe_add(c,s);d=safe_add(d,u);i=safe_add(i,v)}return Array(b,c,d,i)}function md5_cmn(a,j,k,l,b,i){return safe_add(bit_rol(safe_add(safe_add(j,a),safe_add(l,i)),b),k)}function md5_ff(l,m,a,b,n,c,d){return md5_cmn((m&a)|((~m)&b),l,m,n,c,d)}function md5_gg(l,m,a,b,n,c,d){return md5_cmn((m&b)|(a&(~b)),l,m,n,c,d)}function md5_hh(l,m,a,b,n,c,d){return md5_cmn(m^a^b,l,m,n,c,d)}function md5_ii(l,m,a,b,n,c,d){return md5_cmn(a^(m|(~b)),l,m,n,c,d)}function safe_add(f,g){var h=(f&65535)+(g&65535);var e=(f>>16)+(g>>16)+(h>>16);return(e<<16)|(h&65535)}function bit_rol(d,c){return(d<<c)|(d>>>(32-c))}function binl2hex(h){var e=hexcase?"0123456789ABCDEF":"0123456789abcdef";var g="";for(var f=0;f<h.length*4;f++){g+=e.charAt((h[f>>2]>>((f%4)*8+4))&15)+e.charAt((h[f>>2]>>((f%4)*8))&15)}return g}function str2binl(g){var h=Array();var f=(1<<chrsz)-1;for(var e=0;e<g.length*chrsz;e+=chrsz){h[e>>5]|=(g.charCodeAt(e/chrsz)&f)<<(e%32)}return h}function b64_423(j){var k=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_");var i=new String();for(var l=0;l<j.length;l++){for(var h=0;h<64;h++){if(j.charAt(l)==k[h]){var g=h.toString(2);i+=("000000"+g).substr(g.length);break}}if(h==64){if(l==2){return i.substr(0,8)}else{return i.substr(0,16)}}}return i}function b2i(g){var f=0;var e=128;for(var h=0;h<8;h++,e=e/2){if(g.charAt(h)=="1"){f+=e}}return String.fromCharCode(f)}function b64_decodex(g){var e=new Array();var h;var f="";for(h=0;h<g.length;h+=4){f+=b64_423(g.substr(h,4))}for(h=0;h<f.length;h+=8){e+=b2i(f.substr(h,8))}return e}function utf8to16(i){var q,o,p,n,j,r,s,t,c;q=[];n=i.length;o=p=0;while(o<n){j=i.charCodeAt(o++);switch(j>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:q[p++]=i.charAt(o-1);break;case 12:case 13:r=i.charCodeAt(o++);q[p++]=String.fromCharCode(((j&31)<<6)|(r&63));break;case 14:r=i.charCodeAt(o++);s=i.charCodeAt(o++);q[p++]=String.fromCharCode(((j&15)<<12)|((r&63)<<6)|(s&63));break;case 15:switch(j&15){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r=i.charCodeAt(o++);s=i.charCodeAt(o++);t=i.charCodeAt(o++);c=((j&7)<<18)|((r&63)<<12)|((s&63)<<6)|(t&63)-65536;if(0<=c&&c<=1048575){q[p]=String.fromCharCode(((c>>>10)&1023)|55296,(c&1023)|56320)}else{q[p]="?"}break;case 8:case 9:case 10:case 11:o+=4;q[p]="?";break;case 12:case 13:o+=5;q[p]="?";break}}p++}return q.join("")}function getStringLen(c){var d=c.match(/[^\x00-\xff]/ig);return c.length+(d==null?0:d.length)}function getBrowserType(){var b=0;if(window.ActiveXObject){if(window.XMLHttpRequest&&!window.XDomainRequest){return 5}else{if(window.XDomainRequest){return 6}else{return 1}}}else{if(navigator.userAgent.toLowerCase().indexOf("firefox")>=0){b=2}else{if(typeof(window.opera)=="object"){b=3}else{if(window.MessageEvent&&!document.getBoxObjectFor){b=7}else{if(navigator.appVersion.indexOf("Safari")>=0){b=4}}}}}return b}function checkCookieEnabled(){try{if(navigator.cookieEnabled==false){return false}}catch(b){}return true}Function.prototype.bindFunc=function(c){if(typeof(c)!="object"){return false}var d=this;return function(){return d.apply(c,arguments)}};var login_status="";var logout_status="";var renew_status="";var PassportCardList=[];var PassportSC={version:26,cvsid:"$Id: pp18030.js,v 1.78 2009/10/26 08:22:26 jiangyan Exp $",appid:9999,max_line_length:30,domain:"",cookie:false,email:"",bindDomainSelector:true,autopad:"",autoRedirectUrl:"",loginRedirectUrl:"",logoutRedirectUrl:"",selectorTitle:"请选择您的用户帐号类型",registerUrl:this.loginProtocal+"://passport.sohu.com/web/signup.jsp",recoverUrl:this.loginProtocal+"://passport.sohu.com/web/recover.jsp",postru:"",emailPostfix:false,curDSindex:-1,usePost:0,successCalledFunc:false,curCardIndex:0,oElement:false,rootElement:false,dsElement:false,sElement:false,cElement:false,dsAnchor:false,emailInput:false,passwdInput:false,pcInput:false,loginMsg:false,iElement:false,isSetFocus:true,loginProtocal:"https",setCookieProtocol:"http",http_url:false,eInterval:false,maxIntervalCount:100,intervalCount:0,state:"0000",defualtRemPwd:"",isShowRemPwdMsg:0,campImg:"http://js.sohu.com/passport/images/pic007.gif",campImgAlt:"大本营",campUrl:"http://blog.sohu.com/camp?from=",cardTitle:"上搜狐，知天下",firstDomain:"",defaultApp:"",domainPool:["chinaren.com","sogou.com"],domainList:["uniqname","sohu.com","chinaren.com","sogou.com","vip.sohu.com","17173.com","focus.cn","game.sohu.com","37wanwan.com"],appList:{"1051":"news_say","1017":"pp","1019":"blog","1073":"t","1074":"tv","1000":"mail","1001":"club","1062":"bai","1005":"alumni","10050":"chinaren","1038":"crclub","1039":"group","1021":"music","1010":"say","1042":"cbbs","1028":"focus","1029":"17173","1013":"vip","1035":"rpggame","1044":"pinyin","1022":"relaxgame"},appName:{news_say:"我来说两句",pp:"相册",blog:"博客",t:"微博",tv:"视频",mail:"邮件",club:"社区",bai:"白社会",alumni:"校友录",chinaren:"ChinaRen",crclub:"CR社区",group:"群组",music:"音乐盒",say:"说吧",cbbs:"校友论坛",focus:"焦点房产","17173":"游戏论坛",vip:"vip邮箱",rpggame:"RPG游戏",pinyin:"输入法",relaxgame:"休闲游戏"},appUrl:{news_say:"http://i.sohu.com/scomment/home/all/",pp:"http://pp.sohu.com/",blog:"http://blog.sohu.com/",t:"http://t.sohu.com",tv:"http://tv.sohu.com",mail:"http://mail.sohu.com/",club:"http://club.sohu.com",bai:"http://bai.sohu.com",alumni:"http://class.chinaren.com",chinaren:"",crclub:"http://club.chinaren.com",group:"http://i.chinaren.com/group",say:"http://s.sogou.com",music:"http://mbox.sogou.com/",cbbs:"http://cbbs.chinaren.com",focus:"http://www.focus.cn","17173":"http://bbs.17173.com",vip:"http://vip.sohu.com",rpggame:"http://game.sohu.com",pinyin:"http://pinyin.sogou.com",relaxgame:"http://game.sohu.com/index2.htm"},appPool:false,bottomRow:[],recomServ:[],reverseFirstDomain:false,showEmailInputTip:true,usePostFix:true,gotohref:function(d){var a=document.createElement("a");if(getBrowserType()==1){a.setAttribute("href",d);document.body.appendChild(a);a.click()}else{window.location=d;return}},getDomain:function(){var c=document.domain.split(".");var d=c.length;if(d<=2){return document.domain}return c[d-2]+"."+c[d-1]},getPassportDomain:function(){var b="passport."+this.domain;if(this.domain==""){this.domain=this.getDomain()}if(this.domain in {"focus.cn":"","17173.com":"","37wanwan.com":"","51f.com":""}){b="pass."+this.domain}return b},addCookie:function(f,i,h){if(this.domain==""){this.domain=this.getDomain()}var j=f+"="+escape(i)+"; path=/; domain=."+this.domain+";";if(h>0){var g=new Date();g.setTime(g.getTime()+h*3600*1000);j=j+"expires="+g.toGMTString()+";"}document.cookie=j},addCookie2:function(g,j,i,k){var l=g+"="+j+"; path=/; domain=."+k+";";if(i>0){var h=new Date();h.setTime(h.getTime()+i*3600*1000);l=l+"expires="+h.toGMTString()+";"}document.cookie=l},getCookie:function(g){var h=document.cookie;var j=document.cookie.split("; ");var i=g+"=";for(var f=0;f<j.length;f++){if(j[f].indexOf(i)==0){return j[f].substr(i.length)}}return""},deleteCookie:function(e){if(this.domain==""){this.domain=this.getDomain()}var f=new Date();f.setTime(f.getTime()-100000);var d=this.getCookie(e);document.cookie=e+"="+d+"; expires="+f.toGMTString()+"; path=/; domain=."+this.domain+";"},preventEvent:function(b){b.cancelBubble=true;b.returnValue=false;if(b.preventDefault){b.preventDefault()}if(b.stopPropagation){b.stopPropagation()}},getPosition:function(d,e){var f=0;while(d){f+=d[e];d=d.offsetParent}return f},getTime:function(){var b=new Date();return b.getTime()},strip:function(b){return b.replace(/^\s+/,"").replace(/\s+$/,"")},reportMsg:function(d){var f="";switch(d){case"1":f+="请输入通行证用户名";break;case"2":f+="通行证用户名为邮件地址格式";break;case"3":f+="用户名后缀必须为"+arguments[1];break;case"4":f+="请输入通行证密码";break;case"5":var e=this.strip(this.emailInput.value);if(e.lastIndexOf("@focus.cn")>0){f+="用户名或密码错误!咨询电话:010-58511234"}else{f+="用户名或密码错误"}break;case"6":f+="登录超时，请稍后重试";break;case"7":f+="登录失败，请重试";break;case"8":f+="网络故障，退出失败，请重新退出";break;case"9":f+="登录失败，请稍后重试";break;case"10":f+="您登录过于频繁，请24小时后再试";break;case"11":f+="浏览器设置有误，请查看帮助修正";break;case"12":f+="服务器故障，请稍候再试";break;default:f+="登录错误，请稍后重试"}this.showMsg(f)},showMsg:function(b){if(!this.loginMsg){return}this.loginMsg.innerHTML=b},cookieHandle:function(){if(!this.cookie){this.parsePassportCookie()}if(this.cookie&&this.cookie.userid!=""){return this.cookie.userid}else{return""}},relationHandle:function(){if(!this.cookie){this.parsePassportCookie()}return this._parserRelation()},_parserRelation:function(){var g=this.cookie.relation;if(g!=null&&g.length>0){var h=g.split(";");for(var i=0;i<h.length;i++){var k=h[i].split(",");var j=k[2].split("#");for(var l=0;l<j.length;l++){if(PassportSC.appid==j[l]){return k[0]}}}}return""},getDisplayName:function(){var e=this.cookieHandle();var f=e.split("@");var g=f[0];var h=/^1\d{10}$/;if(h.test(g)){return g.substring(0,3)+"****"+g.substring(7)}else{return e}},parsePassportCookie:function(){var j=document.cookie.split("; ");for(var k=0;k<j.length;k++){if(j[k].indexOf("ppinf=")==0){var l=j[k].substr(6);break}if(j[k].indexOf("ppinfo=")==0){var l=j[k].substr(7);break}if(j[k].indexOf("passport=")==0){var l=j[k].substr(9);break}}if(k==j.length){this.cookie=false;return}try{var h=unescape(l).split("|");if(h[0]=="1"||h[0]=="2"){var e=utf8to16(b64_decodex(h[3]));this._parsePassportCookie(e);return}}catch(i){}},_parsePassportCookie:function(o){var e;var r;var q;this.cookie=new Object;e=0;r=o.indexOf(":",e);while(r!=-1){var s;var t;var k;s=o.substring(e,r);lenEnd_offset=o.indexOf(":",r+1);if(lenEnd_offset==-1){break}t=parseInt(o.substring(r+1,lenEnd_offset));k=o.substr(lenEnd_offset+1,t);if(o.charAt(lenEnd_offset+1+t)!="|"){break}this.cookie[s]=k;e=lenEnd_offset+2+t;r=o.indexOf(":",e)}relation_userid=this._parserRelation();if(relation_userid!=null&&relation_userid.length>0){this.cookie[s]=relation_userid}try{this.cookie.service=new Object;var l=this.cookie.service;l.mail=0;l.alumni=0;l.chinaren=0;l.blog=0;l.pp=0;l.club=0;l.crclub=0;l.group=0;l.say=0;l.music=0;l.focus=0;l["17173"]=0;l.vip=0;l.rpggame=0;l.pinyin=0;l.relaxgame=0;var n=this.cookie.serviceuse;if(n.charAt(0)==1){l.mail="sohu"}else{if(n.charAt(2)==1){l.mail="sogou"}else{if(this.cookie.userid.indexOf("@chinaren.com")>0){l.mail="chinaren"}}}if(n.charAt(1)==1){l.alumni=1}if(n.charAt(3)==1){l.blog=1}if(n.charAt(4)==1){l.pp=1}if(n.charAt(5)==1){l.club=1}if(n.charAt(7)==1){l.crclub=1}if(n.charAt(8)==1){l.group=1}if(n.charAt(10)==1){l.music=1}if(n.charAt(11)==1||this.cookie.userid.lastIndexOf("@focus.cn")>0){l.focus=1}if(n.charAt(12)==1||this.cookie.userid.indexOf("@17173.com")>0){l["17173"]=1}if(n.charAt(13)==1){l.vip=1}if(n.charAt(14)==1){l.rpggame=1}if(n.charAt(15)==1){l.pinyin=1}if(n.charAt(16)==1){l.relaxgame=1}}catch(p){}},parseAppid:function(){var g=this.appid.toString();var h=0;this.appPool=new Array();for(var e in this.appList){var f=this.appList[e];if(typeof(f)!="string"){continue}if(e==g){this.defaultApp=this.appName[f]}else{if(e=="1028"){this.appPool[h]={app:"focus",name:"北京业主论坛",url:"http://house.focus.cn/group/yezhu.php"};h++;this.appPool[h]={app:"focus",name:"装修论坛",url:"http://home.focus.cn/group/group_forum.php"}}else{this.appPool[h]={app:f,name:this.appName[f],url:this.appUrl[f]}}h++}}},getBottomRow:function(){var d=0;var c=this.max_line_length-getStringLen(this.defaultApp);this.bottomRow[0]=new Array();this.bottomRow[1]=new Array();if(!this.cookie){return}d=this._getBottomRow(this.bottomRow[0],c,0);c=this.max_line_length;d=this._getBottomRow(this.bottomRow[1],c,d)},_getBottomRow:function(i,o,r){var t,q;var m=this.cookie.service;var n=this.appPool;var p=r;var j;for(q=0;p<n.length;p++){t=n[p]["app"];if(typeof(t)!="string"){continue}j=getStringLen(n[p]["name"]);if(o-j<0){break}if("news_say"==t||"pp"==t||"blog"==t||"t"==t||"tv"==t||"mail"==t||"club"==t){o-=(j+2);i[q]=n[p];if(t=="mail"){if(m.mail=="sohu"){i[q]["url"]=this.loginProtocal+"://mail.sohu.com?appid=0001"}else{if(m.mail=="sogou"){i[q]["url"]="http://mail.sogou.com"}else{i[q]["url"]="http://mail.chinaren.com"}}}q++;continue}else{continue}if(typeof(m[t])=="undefined"){continue}if(m[t]!=0){j=getStringLen(n[p]["name"]);if(o-j<0){break}o-=(j+2);i[q]=n[p];if(t=="mail"){if(m.mail=="sohu"){i[q]["url"]=this.loginProtocal+"://mail.sohu.com?appid=0001"}else{if(m.mail=="sogou"){i[q]["url"]=this.loginProtocal+"://mail.sogou.com"}else{i[q]["url"]=this.loginProtocal+"://mail.chinaren.com"}}}q++}else{if(n[p]["name"]=="ChinaRen"){continue}var s=this.recomServ.length;this.recomServ[s]=n[p];if(t=="mail"){this.recomServ[s]["url"]=this.loginProtocal+"://mail.chinaren.com"}}}return p},parseLastDomain:function(r){this.emailPostfix=new Array();var y="",i="";var z="",e="",t=[];var j=document.cookie.split("; ");for(var v=0;v<j.length;v++){if(j[v].indexOf("lastdomain=")==0){try{t=unescape(j[v].substr(11)).split("|");if(t.length==4){var w=t[3];if(w!=null&&w=="1"){this.loginProtocal="http";this.setCookieProtocol="http"}}}catch(s){}break}}var x=0;if(t.length>=3){var q=utf8to16(b64_decodex(t[1]));var u=q.split("|");for(var v=0;v<u.length;v++){if(u[v]!=""){this.emailPostfix[x]=u[v];x++}}}if(this.firstDomain!=""){for(var v in r){if(this.firstDomain==r[v]){i=r[v];break}}if(i!=""){this.emailPostfix[x]=i;x++}}if(document.domain.indexOf("game.sohu.com")>=0){y="game.sohu.com";this.emailPostfix[x]=y;x++}this.emailPostfix[x]=this.domain;x++;for(var v in r){if(typeof(r[v])!="string"){continue}if(r[v]!=this.domain&&r[v]!=y&&r[v]!=i){this.emailPostfix[x]=r[v];x++}}},doPost:function(){for(var e=0;e<document.forms.length;e++){if(document.forms[e].name=="loginform"){break}}if(e==document.forms.length){document.location.href=this.loginProtocal+"://passport.sohu.com";return false}var b=getBrowserType();var f=screen.width;document.forms[e].action=this.loginProtocal+"://passport.sohu.com/sso/login_js.jsp?appid="+this.appid+"&ru="+this.postru+"&b="+b+"&w="+f+"&v="+this.version;document.forms[e].submit();return false},doLogin:function(){if(this.eInterval){return}if(arguments[0]){PassportCardList[index].doLogin()}login_status="";this.intervalCount=0;this.sElement.innerHTML="";this.email=this.strip(this.emailInput.value);var h=this.email;var e=this.strip(this.passwdInput.value);var f=0;if(this.pcInput.checked==true){f=1}if(h==""){this.reportMsg("1");this.emailInput.focus();return false}if(this.autopad!=""){var g=h.substr(h.lastIndexOf("@")+1);if(this.autopad.lastIndexOf(g)<0){this.reportMsg("3",this.autopad);this.emailInput.focus();this.passwdInput.value="";return false}}if(e==""){this.reportMsg("4");this.passwdInput.value="";this.passwdInput.focus();return false}if(this.usePost==1){return this.doPost()}this.drawPassportWait("正在登录搜狐通行证，请稍候...");return this.loginHandle(h,e,f,this.sElement,this.loginFailCall.bindFunc(this),this.loginSuccessCall.bindFunc(this))},loginHandle:function(s,y,w,b,x,B){if(typeof(b)!="object"){return false}if(checkCookieEnabled()==false){x();return false}login_status="";var v=getBrowserType();var u=screen.width;if(this.domain==""){this.domain=this.getDomain()}var C=this.getTime();var A=hex_md5(y);var e=new Date().getTime();try{this.http_url="http://passport.sohu.com/sso/login.jsp?userid="+encodeURIComponent(s)+"&password="+A+"&appid="+this.appid+"&persistentcookie="+w+"&isSLogin=1&s="+C+"&b="+v+"&w="+u+"&pwdtype=1&v="+this.version+"&t="+e;if((this.loginProtocal=="https")&&(C>MIN_HTTS_TIMESTAMP)){var D="https://passport.sohu.com/sso/login.jsp?userid="+encodeURIComponent(s)+"&password="+A+"&appid="+this.appid+"&persistentcookie="+w+"&s="+C+"&b="+v+"&w="+u+"&pwdtype=1&v="+this.version+"&t="+e}else{var D=this.http_url}}catch(z){this.http_url="http://passport.sohu.com/sso/login.jsp?userid="+s+"&password="+A+"&appid="+this.appid+"&persistentcookie="+w+"&isSLogin=1&s="+C+"&b="+v+"&w="+u+"&pwdtype=1&v="+this.version+"&t="+e;if((this.loginProtocal=="https")&&(C>MIN_HTTS_TIMESTAMP)){var D="https://passport.sohu.com/sso/login.jsp?userid="+s+"&password="+A+"&appid="+this.appid+"&persistentcookie="+w+"&s="+C+"&b="+v+"&w="+u+"&pwdtype=1&v="+this.version+"&t="+e}else{var D=this.http_url}}if(this.domain!="sohu.com"){D+="&domain="+this.domain}if(this.loginProtocal=="https"){this.state="1100"}else{this.state="2200"}this.sendLog(b,"beginLogin","0");var t=document.createElement("script");t.src=D;t.id="loginele";b.appendChild(t);var r=this;this.eInterval=setInterval(function(){r.loginIntervalProc(x,B,b)},100);return false},sendLog:function(i,h,g){var j=document.createElement("script");var f=getBrowserType();j.src="https://passport.sohu.com/web/cardlog.jsp?desc="+h+"&loginProtocal="+this.loginProtocal+"&userid="+this.email+"&appid="+this.appid+"&browserType="+f+"&status="+login_status+"&count="+this.intervalCount+"&max="+this.maxIntervalCount+"&flag="+g;i.appendChild(j)},loginIntervalProc:function(l,j,i){if(login_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(login_status==""&&this.intervalCount>=this.maxIntervalCount){var h="";if(this.state=="2200"){h="1";this.state="2210"}else{if(this.state=="1200"){this.state="1210";h="3"}}this.sendLog(i,"login timeout"+this.state,h)}if(login_status=="success"){this.addCookie2("pp_login_time",this.loginProtocal+"|"+this.email+"|"+this.appid+"|"+getBrowserType()+"|"+this.intervalCount+"|"+this.state,-1,"sohu.com");if(this.state=="1200"){this.sendLog(i,"login success","2")}}if(login_status!="success"||this.intervalCount>=this.maxIntervalCount){if(this.loginProtocal=="https"&&login_status==""){this.intervalCount=0;this.loginProtocal="http";this.state="1200";if(this.http_url.charAt(4)=="s"){this.http_url="http"+this.http_url.substr(5)}if(this.domain!="sohu.com"){this.http_url+="&domain="+this.domain}var k=document.createElement("script");k.src=this.http_url;i.appendChild(k);var g=this;this.eInterval=setInterval(function(){g.loginIntervalProc(l,j,i)},100)}else{l()}return}if(this.loginRedirectUrl==""){this.autoProcAllDomain("login",i)}else{this.addCookie("crossdomain",this.getTime(),336)}j()},loginFailCall:function(){this.sElement.innerHTML="";this.drawLoginForm();if(this.intervalCount>=this.maxIntervalCount){this.reportMsg("6");this.emailInput.focus()}else{if(login_status=="error3"||login_status=="error2"){this.reportMsg("5");this.passwdInput.focus()}else{if(login_status=="error5"){this.reportMsg("10");this.passwdInput.focus()}else{if(login_status=="error13"){window.location=this.loginProtocal+"://passport.sohu.com/web/remind_activate.jsp";return}else{if(login_status=="error11"){this.reportMsg("12");this.passwdInput.focus()}else{if(checkCookieEnabled()==false){this.reportMsg("11");this.emailInput.focus()}else{this.reportMsg("9");this.passwdInput.focus()}}}}}}},loginSuccessCall:function(){this.parsePassportCookie();if(this.cookie&&this.cookie.userid!=""){this.email="";if(this.loginRedirectUrl!=""){if(this.cookie.service.mail!="0"&&(this.appid=="1000"||this.appid=="1014"||this.appid=="1037")){if(this.domain.indexOf(this.cookie.service.mail)==-1){this.drawLoginForm()}else{PassportSC.gotohref(this.loginRedirectUrl)}}else{if(document.location.href==this.loginRedirectUrl){document.location.reload()}else{PassportSC.gotohref(this.loginRedirectUrl)}}}else{this.getBottomRow();this.drawPassportCard();for(var b=0;b<PassportCardList.length;b++){if(b==this.curCardIndex){continue}PassportCardList[b].parsePassportCookie();PassportCardList[b].getBottomRow();PassportCardList[b].drawPassportCard()}}}else{this.drawLoginForm();this.reportMsg("7")}},doLogout:function(){if(this.eInterval){return}this.intervalCount=0;this.sElement.innerHTML="";if(this.usePost==1){window.location=this.loginProtocal+"://passport.sohu.com/sso/logout_js.jsp?s="+this.getTime()+"&ru="+this.postru}else{this.logoutHandle(this.sElement,this.logoutFailCall.bindFunc(this),this.logoutSuccessCall.bindFunc(this,"dd"))}},logoutHandle:function(k,h,l){if(typeof(k)!="object"){return false}logout_status="";if(this.domain==""){this.domain=this.getDomain()}var j=this.getTime();var m=this.loginProtocal+"://passport.sohu.com/sso/logout.jsp?s="+j+"&appid="+this.appid;if(this.domain!="sohu.com"){m+="&domain="+this.domain}var n=document.createElement("script");n.src=m;k.appendChild(n);var i=this;this.eInterval=setInterval(function(){i.logoutIntervalProc(h,l,k)},100)},logoutIntervalProc:function(g,i,h){if(logout_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(logout_status==""&&this.intervalCount>=this.maxIntervalCount){g();var j=document.createElement("script");var f=getBrowserType();j.src=this.loginProtocal+"://passport.sohu.com/web/cardlog.jsp?desc=logout timeout&loginProtocal="+this.loginProtocal+"&userid="+this.email+"&appid="+this.appid+"&browserType="+f;h.appendChild(j);return}if(logout_status!="success"){g();return}if(this.logoutRedirectUrl==""){this.autoProcAllDomain("logout",h)}else{this.addCookie("crossdomain_logout",this.getTime(),336)}i()},logoutFailCall:function(){this.sElement.innerHTML="";this.reportMsg("8")},logoutSuccessCall:function(f){this.parseLastDomain(this.domainList);this.cookie=false;this.drawLoginForm();for(var e=0;e<PassportCardList.length;e++){if(e==this.curCardIndex){continue}PassportCardList[e].drawLoginForm()}try{logoutApp()}catch(d){}},renewCookie:function(k,h,l){if(typeof(k)!="object"){return false}if(this.domain==""){this.domain=this.getDomain()}var j=this.getTime();var m=this.loginProtocal+"://passport.sohu.com/sso/renew.jsp?s="+j;if(this.domain!="sohu.com"){m+="&domain="+this.domain}var n=document.createElement("script");n.src=m;k.appendChild(n);var i=this;this.eInterval=setInterval(function(){i.renewIntervalProc(h,l,k)},100);return false},renewIntervalProc:function(f,e,h){if(renew_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(renew_status!="success"||this.intervalCount>=this.maxIntervalCount){try{f()}catch(g){}return}this.autoProcAllDomain("renew",h);try{e()}catch(g){}},autoProcAllDomain:function(g,h){var f=this.crossDomainIframeUrl(g);if(f){var e=document.createElement("iframe");e.src=f;e.style.width="0";e.style.height="0";h.appendChild(e)}},doCrossDomainCookie:function(i,j){if(typeof(i)!="object"){return}var g="crossdomain";if(j=="logout"){g="crossdomain_logout"}var l=this.getCookie(g);if(l==""||l=="0"){return}if(this.domain==""){this.domain=this.getDomain()}var h=this.crossDomainIframeUrl(j);if(h){var k=document.createElement("iframe");k.src=h;k.style.width="0";k.style.height="0";i.appendChild(k);this.deleteCookie(g)}},crossDomainUrl:function(h,e){var g=this.getTime();var f=this.setCookieProtocol+"://passport.sohu.com/sso/crossdomain.jsp?s="+g+"&action="+h+"&domain="+e;return f},crossDomainIframeUrl:function(c){var d=this.setCookieProtocol+"://"+this.getPassportDomain()+"/sso/crossdomain_all.jsp?action="+c;return d},setDomainCookie:function(i,j,k,g){login_status="";crossdomain_status="";var l=this.crossDomainUrl("login",j);if(l){newScript=document.createElement("script");newScript.src=l;i.appendChild(newScript)}var h=this;this.eInterval=setInterval(function(){h.setCookieIntervalProc(i,k,g)},100)},setCookieIntervalProc:function(f,d,e){if(crossdomain_status!=""){clearInterval(this.eInterval);this.eInterval=false;e();return}if(login_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(login_status!="success"||this.intervalCount>=this.maxIntervalCount){e();return}d()},downDSindex:function(){if(this.dsAnchor.firstChild==null){return}var d=this.dsAnchor.firstChild.rows;var c=0;for(;c<d.length;c++){if(d[c].firstChild.idx==this.curDSindex){break}}if(c>=d.length-1){this.curDSindex=d[0].firstChild.idx}else{this.curDSindex=d[c+1].firstChild.idx}},upDSindex:function(){if(this.dsAnchor.firstChild==null){return}var e=this.dsAnchor.firstChild.rows;var f=-1;var d=0;for(;d<e.length;d++){if(e[d].firstChild.idx==this.curDSindex){break}f=e[d].firstChild.idx}if(d==e.length){this.curDSindex=e[0].firstChild.idx}else{if(f==-1){this.curDSindex=e[e.length-1].firstChild.idx}else{this.curDSindex=f}}},findDSindex:function(e){try{var f=this.dsAnchor.firstChild.rows;for(var h=0;h<f.length;h++){if(f[h].firstChild.idx==e){return f[h].firstChild}}}catch(g){}return false},clearFocus:function(d){if(typeof(d)!="number"){d=this.curDSindex}try{var e=this.findDSindex(d);e.className="";e.style.fontWeight="normal"}catch(f){}},setFocus:function(d){if(typeof(d)!="number"){d=this.curDSindex}try{var e=this.findDSindex(d);e.className="active"}catch(f){}},fillEmailSelect:function(){var j=this.emailInput.value;var C=/^[\u4e00-\u9fa5,a-zA-Z0-9-_.@]{1,100}$/;if(j==""||!C.test(j)){this.dsElement.style.display="none";return}var i="";var P="";var B=j.lastIndexOf("@");if(B<0){P=j}else{if(B==j.length-1){P=j.substr(0,B)}else{P=j.substr(0,B);i=j.substr(B+1)}}var G=this.getPosition(this.emailInput,"offsetLeft")-this.getPosition(this.cElement,"offsetLeft");if(document.all&&!document.addEventListener){G+=1}this.dsElement.style.marginLeft=G+"px";this.dsElement.style.marginTop=(this.getPosition(this.emailInput,"offsetTop")-this.getPosition(this.cElement,"offsetTop")+this.emailInput.offsetHeight)+"px";this.dsElement.style.zIndex="2000";this.dsElement.style.paddingRight="0";this.dsElement.style.paddingLeft="0";this.dsElement.style.paddingTop="0";this.dsElement.style.paddingBottom="0";this.dsElement.style.backgroundColor="white";this.dsElement.style.display="block";var H=document.createElement("TABLE");H.width="100%";H.cellSpacing=0;H.cellPadding=3;var O=document.createElement("TBODY");H.appendChild(O);var A=0;var M=false;var F=false;var e=-1;var E="",L="";var J=this.emailPostfix;var p=/^1.*$/;if(p.test(j)){if(this.autopad!=""){J=["mobile","qq.com","focus.cn",this.autopad]}else{J=["mobile","qq.com","focus.cn"]}}for(var z=0;z<J.length;z++){var K=J[z];if(typeof(K)!="string"){continue}if(i!=""){if(K.lastIndexOf(i)!=0){continue}}if(K.lastIndexOf("@")>0){tmp_pos=K.lastIndexOf("@");if(this.autopad!=""&&this.autopad.lastIndexOf(K.substring(tmp_pos+1))<0){continue}L=K.substring(0,tmp_pos);if(L.lastIndexOf(P)!=0){continue}if(L==P){E=K.substring(K.lastIndexOf("@")+1)}F=true}else{if(this.autopad!=""&&this.autopad.lastIndexOf(K)<0){continue}}if(K==E){continue}A++;if(e==-1){e=z}if(this.curDSindex==z){M=true}var N=document.createElement("TR");var I=document.createElement("TD");I.nowrap="true";I.align="left";if(K=="mobile"||K=="uniqname"){I.innerHTML=P}else{if(F==false){if(this.usePostFix){I.innerHTML=P+"@"+K}else{I.innerHTML=P}}else{if(this.usePostFix){I.innerHTML=K}else{I.innerHTML=K.substring(0,K.lastIndexOf("@"))}}}I.id="email_postfix_"+z;I.idx=z;var D=this;I.onmouseover=function(){D.clearFocus();D.curDSindex=this.idx;D.setFocus();this.style.cursor="hand"};I.onclick=function(){D.doSelect()};N.appendChild(I);O.appendChild(N);F=false}if(A>0){this.dsAnchor.innerHTML="";this.dsAnchor.appendChild(H);if(M==false){this.curDSindex=e}this.setFocus()}else{this.dsElement.style.display="none";this.curDSindex=-1}},doSelect:function(){this.dsElement.style.display="none";var d=this.findDSindex(this.curDSindex);if(d){var c=d.innerHTML;if(c){this.emailInput.value=c.replace(/&amp;/g,"&")}}if(this.emailInput.value!=""){this.passwdInput.focus()}},checkKeyDown:function(d){d=d||window.event;var c=d.keyCode||d.which||d.charCode;if(c==38||c==40){if(d.shiftKey==1){return}this.clearFocus();if(c==38){this.upDSindex()}else{if(c==40){this.downDSindex()}}this.setFocus()}},checkKeyPress:function(d){d=d||window.event;var f=d.keyCode||d.which||d.charCode;if(f==13){this.preventEvent(d)}else{if(f==38||f==40){if(d.shiftKey==1){return}this.preventEvent(d);this.clearFocus();if(f==38){this.upDSindex()}else{if(f==40){this.downDSindex()}}this.setFocus()}else{if(f==108||f==110||f==111||f==115){var e=this;setTimeout(function(){e.fillEmailSelect()},10)}}}},checkKeyUp:function(d){d=d||window.event;var c=d.keyCode||d.which||d.charCode;this.fillEmailSelect();if(c==13){this.doSelect()}if(getBrowserType()==7||getBrowserType()==4){if(c==38||c==40){if(d.shiftKey==1){return}this.clearFocus();if(c==38){this.upDSindex()}else{if(c==40){this.downDSindex()}}this.setFocus()}}},init:function(b){this.rootElement=b;this.rootElement.innerHTML='<div class="ppselecter" style="position: absolute; display: none;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td style="" class="ppseltit" id="ppseltitId">'+this.selectorTitle+'</td></tr><tr><td height="2" /></tr><tr><td /></tr></tbody></table></div><div style="display: none;"></div><div class="passportc"></div>';if(this.selectorTitle==null||this.selectorTitle.length==0){this.rootElement.innerHTML='<div class="ppselecter" style="position: absolute; display: none;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr></tr><tr><td height="0" /></tr><tr><td /></tr></tbody></table></div><div style="display: none;"></div><div class="passportc"></div>'}this.dsElement=this.rootElement.childNodes[0];this.sElement=this.rootElement.childNodes[1];this.cElement=this.rootElement.childNodes[2];this.dsAnchor=this.dsElement.firstChild.rows[2].firstChild;this.domain=this.getDomain();this.parseLastDomain(this.domainList);this.parseAppid();this.parsePassportCookie();this.getBottomRow();if(this.postru==""){this.postru=document.location.href}},_drawPassportCard:function(){},drawPassportCard:function(){this._drawPassportCard();var c=document.getElementById("ppcontid");c.onclick=this.doClickLink.bindFunc(this);this.$iElement();try{if(this.iElement!=null){this.successCalledFunc(this.iElement)}else{try{this.drawPassportInfo()}catch(d){}}}catch(d){this.drawPassportInfo()}},doClickLink:function(j){var k=window.event?window.event:j;var l=k.srcElement||k.target;var o=l.tagName.toLowerCase();var i=this.cookie.userid;var m=document.location.href;var n="";if(o=="img"){o=l.parentNode.tagName.toLowerCase();l=l.parentNode}if(o=="a"){var p=document.createElement("script");p.src=this.loginProtocal+"://passport.sohu.com/web/golog.jsp?userid="+i+"&fappid="+this.appid+"&furl="+m+"&turl="+l;this.iElement.appendChild(p)}},$iElement:function(){this.iElement=this.$getElementByClassName("listContA")},$getElementByClassName:function(d){var e=this.cElement.getElementsByTagName("div");for(var f=0;f<e.length;f++){if(e[f].className.lastIndexOf(d)==0){return e[f]}}},drawPassportWait:function(b){},drawPassportInfo:function(){},getRanServ:function(){var g=this.recomServ.length;if(g==0){return""}var e=Math.floor(g*(Math.random()));var h='<a href="'+this.recomServ[e]["url"]+'" target="_blank">'+this.recomServ[e]["name"]+"</a>";if(g==1){return h}var f=Math.floor(g*(Math.random()));while(e==f){f=Math.floor(g*(Math.random()))}h+=' | <a href="'+this.recomServ[f]["url"]+'" target="_blank">'+this.recomServ[f]["name"]+"</a>";return h},_drawLoginForm:function(){},drawLoginForm:function(){this._drawLoginForm();var e=this.cElement.getElementsByTagName("input");for(var f=0;f<e.length;f++){if(e[f].name=="email"){this.emailInput=e[f]}if(e[f].name=="password"){this.passwdInput=e[f]}if(e[f].name=="persistentcookie"){this.pcInput=e[f]}}this.loginMsg=this.$getElementByClassName("error");if(this.isShowRemPwdMsg==1){var d=this;this.pcInput.onclick=function(){if(d.pcInput.checked==false){return}var a=window.confirm("浏览器将在两周内保持通行证的登录状态，网吧或公共机房上网者请慎用。您能确认本次操作吗？");if(a==false){d.pcInput.checked=false}}}this.bindSelector();this.autoFillUserId();var d=this;if(this.emailInput.value==""){if(this.isSetFocus){setTimeout(function(){d.emailInput.focus()},50)}}else{if(this.isSetFocus&&this.emailInput.value!="通行证帐号/手机号"){setTimeout(function(){d.passwdInput.focus()},50)}}},autoFillUserId:function(){if(this.showEmailInputTip){this.showEmailInputTip=false;return}var c=this.getCookie("pptmpuserid");if(this.email.length>0){this.emailInput.value=this.email}else{this.emailInput.value=c}if(c.length>0){var d=this;setTimeout(function(){d.deleteCookie("pptmpuserid")},1000)}},bindSelector:function(){if(this.bindDomainSelector){this.curDSindex=-1;try{if(typeof(emailInput)!="undefined"){this.emailInput.addEventListener("mousedown",this.checkMousedown.bindFunc(this),false);this.emailInput.addEventListener("keypress",this.checkKeyPress.bindFunc(this),false);this.emailInput.addEventListener("keyup",this.checkKeyUp.bindFunc(this),false);this.emailInput.addEventListener("blur",this.doSelect.bindFunc(this),false)}}catch(b){try{this.emailInput.attachEvent("onmousedown",this.checkMousedown.bindFunc(this));this.emailInput.attachEvent("onkeydown",this.checkKeyDown.bindFunc(this));this.emailInput.attachEvent("onkeypress",this.checkKeyPress.bindFunc(this));this.emailInput.attachEvent("onkeyup",this.checkKeyUp.bindFunc(this));this.emailInput.attachEvent("onblur",this.doSelect.bindFunc(this))}catch(b){}}}},checkMousedown:function(){if(this.emailInput.value=="通行证帐号/手机号"){this.emailInput.value="";this.emailInput.style.color="black";this.emailInput.focus();return}},drawPassport:function(element){if(typeof(element)!="object"){return}if(PassportCardList.length==0){PassportCardList[0]=this}if(!this.successCalledFunc){try{this.successCalledFunc=eval("drawAppInfo")}catch(e){this.successCalledFunc=this.drawPassportInfo}}this.init(element);if(this.cookie&&(this.cookie.userid!=""||this.relationHandle()!="")){if(this.autopad!=""){var userid=this.relationHandle()!=""?this.relationHandle():this.cookie.userid;var at=userid.lastIndexOf("@");if(at>0){if(this.autopad.lastIndexOf(userid.substr(at+1))<0){this.drawLoginForm();return}}}if(this.autoRedirectUrl!=""){PassportSC.gotohref(this.autoRedirectUrl)}else{this.drawPassportCard()}}else{this.drawLoginForm()}},drawPassportNew:function(h,l,j){if(typeof(h)!="object"){return}var g=new Function();g.prototype=this;var i=PassportCardList.length;var k=new g();k.successCalledFunc=j;k.appid=l;k.curCardIndex=i;k.isSetFocus=false;PassportCardList[i]=k;drawPassportNewInit(i,h);return},drawPassportJS:function(){if(!this.oElement||typeof(this.oElement)!="object"){return}var e=this.getCookie("ppinf");var f="http://sso.passport.sohu.com/mirror/"+this.getPassportDomain()+"/"+e;var d=document.createElement("script");d.src=f;ele.appendChild(d)},doCrossDomainIframe:function(c){var d=document.createElement("iframe");d.src=c;d.style.width="0";d.style.height="0";d.id="ifr_crossdomain";PassportSC.oElement.appendChild(d)}};if(typeof(PP_SETCROSSDOMAIN)=="undefined"){var ele=document.getElementsByTagName("head")[0];if(typeof(PP_SETCOOKIEPROTOCOL)!="undefined"){PassportSC.setCookieProtocol=PP_SETCOOKIEPROTOCOL}PassportSC.doCrossDomainCookie(ele,"login");PassportSC.doCrossDomainCookie(ele,"logout")}if(typeof encodeURIComponent=="undefined"){PassportSC.usePost=1}if(getBrowserType()==3&&(screen.height==5000||window.navigator.userAgent.lastIndexOf("Mini")>=0)){PassportSC.usePost=1};